<view class="card query-card">
  <view class="section-header">
    <view class="text-title">🔍 查询用户积分</view>
  </view>

  <view class="input-group" style="margin-top: 24rpx;">
    <view class="text-label">用户ID</view>
    <input 
      type="number"
      placeholder="请输入用户ID（数字）" 
      value="{{userId}}" 
      bindinput="onUserIdInput"
    />
  </view>

  <button 
    class="btn-primary" 
    style="margin-top: 32rpx; width: 100%;" 
    loading="{{queryLoading}}" 
    disabled="{{queryLoading}}" 
    bindtap="onQuery"
  >
    {{queryLoading ? '查询中...' : '查询积分'}}
  </button>

  <view wx:if="{{pointsInfo}}" class="points-display">
    <view class="divider" style="margin: 24rpx 0;"></view>
    <view class="row">
      <view class="flex-column">
        <text class="muted" style="font-size: 24rpx;">用户ID</text>
        <text class="text-subtitle" style="margin-top: 8rpx;">{{pointsInfo.userId}}</text>
      </view>
      <view class="flex-column" style="align-items: flex-end;">
        <text class="muted" style="font-size: 24rpx;">当前积分</text>
        <view class="points-value">
          <text class="text-primary" style="font-size: 48rpx; font-weight: 700;">{{pointsInfo.points}}</text>
          <text class="muted" style="font-size: 24rpx; margin-left: 8rpx;">分</text>
        </view>
      </view>
    </view>
  </view>
</view>

<view class="card update-card">
  <view class="section-header">
    <view class="text-title">⚙️ 积分变更</view>
  </view>

  <view class="input-group" style="margin-top: 24rpx;">
    <view class="text-label">
      变更值 delta
      <text class="muted" style="font-size: 22rpx; margin-left: 8rpx;">（正数增加，负数扣减）</text>
    </view>
    <input 
      type="digit"
      placeholder="例如：10（增加）或 -5（扣减）" 
      value="{{delta}}" 
      bindinput="onDeltaInput"
    />
  </view>

  <view class="input-group" style="margin-top: 32rpx;">
    <view class="text-label">备注说明（可选）</view>
    <input 
      placeholder="例如：现场补偿、活动奖励、扣减违规等" 
      value="{{reason}}" 
      bindinput="onReasonInput"
      maxlength="100"
    />
  </view>

  <button 
    class="btn-primary" 
    style="margin-top: 40rpx; width: 100%;" 
    loading="{{updateLoading}}" 
    disabled="{{updateLoading || !userId || !delta}}" 
    bindtap="onUpdate"
  >
    {{updateLoading ? '提交中...' : '提交变更'}}
  </button>

  <view wx:if="{{updateResult}}" class="update-result">
    <view class="divider" style="margin: 24rpx 0;"></view>
    <view class="row-center">
      <view class="flex-column" style="align-items: center;">
        <text class="muted" style="font-size: 24rpx;">变更后积分</text>
        <view class="points-value" style="margin-top: 12rpx;">
          <text class="text-primary" style="font-size: 40rpx; font-weight: 700;">{{updateResult.points}}</text>
          <text class="muted" style="font-size: 24rpx; margin-left: 8rpx;">分</text>
        </view>
      </view>
    </view>
  </view>
</view>


