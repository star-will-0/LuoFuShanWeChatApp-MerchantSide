<view class="card">
  <view class="row">
    <text style="font-weight:600;">查询用户积分</text>
  </view>

  <view style="margin-top: 14rpx;">
    <view class="muted" style="margin-bottom: 8rpx;">用户ID</view>
    <input placeholder="输入 userId（数字）" value="{{userId}}" bindinput="onUserIdInput" />
  </view>

  <button class="btn-primary" style="margin-top: 16rpx;" loading="{{queryLoading}}" disabled="{{queryLoading}}" bindtap="onQuery">
    查询
  </button>

  <view wx:if="{{pointsInfo}}" style="margin-top: 16rpx;">
    <view class="row">
      <text>用户：{{pointsInfo.userId}}</text>
      <text style="font-weight: 700;">{{pointsInfo.points}} 分</text>
    </view>
  </view>
</view>

<view class="card">
  <view class="row">
    <text style="font-weight:600;">增加 / 扣减积分</text>
  </view>

  <view style="margin-top: 14rpx;">
    <view class="muted" style="margin-bottom: 8rpx;">变更值 delta（正数增加，负数扣减）</view>
    <input placeholder="例如 10 或 -5" value="{{delta}}" bindinput="onDeltaInput" />
  </view>

  <view style="margin-top: 14rpx;">
    <view class="muted" style="margin-bottom: 8rpx;">备注（可选）</view>
    <input placeholder="例如：现场补偿/活动奖励/扣减违规" value="{{reason}}" bindinput="onReasonInput" />
  </view>

  <button class="btn-primary" style="margin-top: 16rpx;" loading="{{updateLoading}}" disabled="{{updateLoading}}" bindtap="onUpdate">
    提交变更
  </button>

  <view wx:if="{{updateResult}}" class="muted" style="margin-top: 12rpx;">
    最新积分：{{updateResult.points}}
  </view>
</view>


