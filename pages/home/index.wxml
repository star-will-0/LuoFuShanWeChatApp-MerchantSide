<view class="card header-card">
  <view class="row">
    <view class="flex-column" style="flex: 1;">
      <view class="text-title">{{merchantName || 'å•†å®¶'}}</view>
      <view class="muted" style="margin-top: 8rpx; font-size: 24rpx;">ç¤¼å“å…‘æ¢ç®¡ç†</view>
    </view>
    <view class="logout-btn-wrapper">
      <view class="logout-btn" bindtap="onLogout">
        <text>é€€å‡º</text>
      </view>
    </view>
  </view>
</view>

<view class="card filter-card">
  <view class="row">
    <view class="row-center gap-small">
      <text class="muted">æ’åºï¼š</text>
      <picker mode="selector" range="{{sortOptions}}" range-key="label" value="{{sortIndex}}" bindchange="onSortChange">
        <view class="picker-trigger">
          <text>{{sortOptions[sortIndex].label}}</text>
          <text class="muted" style="margin-left: 8rpx;">â–¼</text>
        </view>
      </picker>
    </view>
    <view class="muted" style="font-size: 24rpx;">å…± {{page}} é¡µ</view>
  </view>
</view>

<view>
  <block wx:for="{{items}}" wx:key="id">
    <view class="card item-card">
      <view class="row">
        <view class="flex-column" style="flex: 1;">
          <view class="text-subtitle">{{item.name || item.itemName || ('ç¤¼å“#' + item.id)}}</view>
          <view class="row" style="margin-top: 16rpx; gap: 16rpx;">
            <view class="muted" wx:if="{{item.stock !== undefined}}">
              ğŸ“¦ åº“å­˜ï¼š{{item.stock}}
            </view>
            <view class="muted" wx:if="{{item.createdAt}}">
              ğŸ“… {{item.createdAt}}
            </view>
          </view>
        </view>
        <view class="points-badge">
          <text class="text-primary" style="font-size: 32rpx; font-weight: 700;">{{item.pointsCost || item.points || 0}}</text>
          <text class="muted" style="font-size: 22rpx; margin-left: 4rpx;">ç§¯åˆ†</text>
        </view>
      </view>
    </view>
  </block>
</view>

<view class="card" wx:if="{{items.length === 0 && !loading}}">
  <view class="empty-state">
    <view class="empty-state-icon">ğŸ“¦</view>
    <text>æš‚æ— ç¤¼å“æ•°æ®</text>
  </view>
</view>

<view class="card" wx:if="{{items.length > 0}}">
  <button 
    class="btn-primary" 
    style="width: 100%;" 
    loading="{{loading}}" 
    disabled="{{loading || !hasMore}}" 
    bindtap="loadMore"
  >
    {{loading ? 'åŠ è½½ä¸­...' : (hasMore ? 'åŠ è½½æ›´å¤š' : 'æ²¡æœ‰æ›´å¤šäº†')}}
  </button>
</view>


